<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CLI Reference â€” UPLINK Docs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/docs.css">
</head>
<body>
  <header class="topbar">
    <a href="/" class="logo">â¬¡ UPLINK DOCS</a>
    <nav class="topnav">
      <a href="/">Home</a>
      <a href="features.html">Features</a>
      <a href="configuration.html">Config</a>
      <a href="https://github.com/mooncompany/uplink" target="_blank">GitHub</a>
    </nav>
    <button class="hamburger" id="hamburger" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </header>

  <div class="docs-layout">
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Getting Started</div>
        <a href="getting-started.html">Installation</a>
        <a href="configuration.html">Configuration</a>
        <a href="cli.html" class="active">CLI Reference</a>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">Features</div>
        <a href="features.html">Overview</a>
        <a href="voice-chat.html">Voice Chat</a>
        <a href="agents.html">Agents</a>
        <a href="artifacts.html">Artifacts</a>
        <a href="split-view.html">Split View</a>
        <a href="remote-access.html">Remote Access</a>
        <a href="themes.html">Themes</a>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">Reference</div>
        <a href="commands.html">Commands</a>
        <a href="premium.html">Premium</a>
        <a href="faq.html">FAQ</a>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">Support</div>
        <a href="troubleshooting.html">Troubleshooting</a>
      </div>
    </aside>

    <main class="docs-content">
      <h1>CLI Reference</h1>
      <p class="subtitle">Manage your Uplink server from the command line.</p>

      <p>Uplink ships with a CLI tool (<code>uplink-chat</code>) that handles starting, stopping, monitoring, and updating the server. If you installed globally via npm, the command is available everywhere. With <code>npx</code>, prefix commands with <code>npx</code>.</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>uplink-chat [command] [options]</code></pre>
      </div>

      <!-- â”€â”€ START â”€â”€ -->
      <h2 id="start">start</h2>
      <p>Start the Uplink server. This is the default command â€” running <code>uplink-chat</code> with no arguments is the same as <code>uplink-chat start</code>.</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code># Foreground (default) â€” auto-restart via watchdog
uplink-chat

# Background (daemon mode)
uplink-chat start --detach

# Custom port
uplink-chat --port 8080

# Bind to specific host
uplink-chat --host 127.0.0.1

# Raw mode â€” no watchdog, no auto-restart
uplink-chat --no-watchdog</code></pre>
      </div>

      <p>By default, Uplink starts with a <strong>watchdog</strong> that automatically restarts the server if it crashes. The watchdog uses exponential backoff (1s â†’ 2s â†’ 4s â†’ max 30s) and resets after 60 seconds of stable uptime.</p>

      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Option</th><th>Description</th><th>Default</th></tr>
          </thead>
          <tbody>
            <tr><td><code>--port N</code></td><td>Port to listen on</td><td>3456</td></tr>
            <tr><td><code>--host H</code></td><td>Host/IP to bind to</td><td>0.0.0.0</td></tr>
            <tr><td><code>--detach</code>, <code>-d</code></td><td>Run in background (daemon mode)</td><td>off</td></tr>
            <tr><td><code>--no-watchdog</code></td><td>Disable auto-restart watchdog</td><td>off</td></tr>
          </tbody>
        </table>
      </div>

      <div class="callout">
        <strong>ðŸ’¡ Foreground vs. Detached</strong>
        <p style="margin-top: 8px; margin-bottom: 0;">In <strong>foreground mode</strong> (default), the server logs to your terminal and stops when you close it. In <strong>detached mode</strong> (<code>-d</code>), it runs silently in the background â€” ideal for always-on setups. Both modes include the watchdog by default.</p>
      </div>

      <!-- â”€â”€ STOP â”€â”€ -->
      <h2 id="stop">stop</h2>
      <p>Stop a running Uplink server. Handles both foreground and daemon (watchdog) processes.</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>uplink-chat stop</code></pre>
      </div>

      <p>If the server was started with <code>--detach</code>, this stops the watchdog (which also stops the server). If it was started in foreground mode, it sends a SIGTERM to the server process directly.</p>

      <!-- â”€â”€ STATUS â”€â”€ -->
      <h2 id="status">status</h2>
      <p>Check whether Uplink is running and display process info.</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>uplink-chat status</code></pre>
      </div>

      <p>Example output when running in watchdog mode:</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>output</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>â¬¡ Uplink is running (watchdog mode)
  Watchdog PID: 12345
  Server PID:   12347
  Uptime:       2h 14m 30s
  Restarts:     0</code></pre>
      </div>

      <p>If the server has crashed and restarted, you'll see the restart count and current backoff interval.</p>

      <!-- â”€â”€ UPDATE â”€â”€ -->
      <h2 id="update">update</h2>
      <p>Update Uplink to the latest version from npm.</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>uplink-chat update</code></pre>
      </div>

      <p>The update command:</p>
      <ol>
        <li>Checks the current version</li>
        <li>Stops the server if it's running</li>
        <li>Runs <code>npm update -g @mooncompany/uplink-chat</code></li>
        <li>Reports the version change (or confirms you're already up to date)</li>
        <li>Restarts the server if it was running before the update</li>
      </ol>

      <div class="callout warning">
        <strong>âš  Permissions</strong>
        <p style="margin-top: 8px; margin-bottom: 0;">If you installed Uplink globally with <code>sudo</code>, the update may also need elevated permissions. On macOS/Linux, use <code>sudo uplink-chat update</code>. On Windows, run your terminal as Administrator.</p>
      </div>

      <!-- â”€â”€ OTHER FLAGS â”€â”€ -->
      <h2 id="flags">Other Flags</h2>
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Flag</th><th>Description</th></tr>
          </thead>
          <tbody>
            <tr><td><code>--version</code>, <code>-v</code></td><td>Print the installed version and exit</td></tr>
            <tr><td><code>--help</code>, <code>-h</code></td><td>Show usage help and exit</td></tr>
          </tbody>
        </table>
      </div>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code># Check version
uplink-chat -v
# â†’ uplink-chat v0.5.1

# Show help
uplink-chat --help</code></pre>
      </div>

      <!-- â”€â”€ WATCHDOG â”€â”€ -->
      <h2 id="watchdog">Watchdog</h2>
      <p>The watchdog is a lightweight supervisor that restarts the Uplink server if it exits unexpectedly. It's enabled by default in both foreground and detached modes.</p>

      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Behavior</th><th>Value</th></tr>
          </thead>
          <tbody>
            <tr><td>Initial restart delay</td><td>1 second</td></tr>
            <tr><td>Backoff multiplier</td><td>2Ã—</td></tr>
            <tr><td>Maximum backoff</td><td>30 seconds</td></tr>
            <tr><td>Backoff reset after stable uptime</td><td>60 seconds</td></tr>
            <tr><td>Clean exit (code 0) behavior</td><td>Does not restart</td></tr>
          </tbody>
        </table>
      </div>

      <p>The watchdog writes its state to <code>.uplink-watchdog.json</code> in the Uplink root directory, which is how <code>uplink-chat status</code> reports uptime and restart counts.</p>

      <p>To disable the watchdog entirely, pass <code>--no-watchdog</code>:</p>

      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>uplink-chat --no-watchdog</code></pre>
      </div>

      <!-- â”€â”€ EXAMPLES â”€â”€ -->
      <h2 id="examples">Examples</h2>

      <h3>Run on a different port</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code>uplink-chat --port 8080</code></pre>
      </div>

      <h3>Always-on daemon</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code># Start in background
uplink-chat start -d

# Check on it later
uplink-chat status

# Stop when needed
uplink-chat stop</code></pre>
      </div>

      <h3>Quick one-off with npx</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code># Run without installing
npx @mooncompany/uplink-chat</code></pre>
      </div>

      <h3>Update and restart</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span>bash</span>
          <button class="copy-btn">Copy</button>
        </div>
        <pre><code># One command â€” stops, updates, restarts
uplink-chat update</code></pre>
      </div>

      <h2>Environment Variables</h2>
      <p>These can be used as alternatives to CLI flags:</p>
      <div class="table-wrap">
        <table>
          <thead>
            <tr><th>Variable</th><th>Description</th><th>Equivalent Flag</th></tr>
          </thead>
          <tbody>
            <tr><td><code>PORT</code></td><td>Server port</td><td><code>--port</code></td></tr>
            <tr><td><code>UPLINK_HOST</code></td><td>Bind address</td><td><code>--host</code></td></tr>
          </tbody>
        </table>
      </div>

      <p>CLI flags take priority over environment variables.</p>

      <h2>Next Steps</h2>
      <ul>
        <li><a href="configuration.html">Configuration</a> â€” Customize Uplink via the Settings panel and config file</li>
        <li><a href="voice-chat.html">Voice Chat</a> â€” Set up speech-to-text and text-to-speech</li>
        <li><a href="remote-access.html">Remote Access</a> â€” Access Uplink from other devices</li>
      </ul>

      <div class="docs-footer">
        <p>UPLINK Docs â€” Built by <a href="https://moonco.pro" target="_blank">Moon Company</a>. Open source under MIT.</p>
      </div>
    </main>
  </div>

  <script src="js/docs.js"></script>
</body>
</html>
